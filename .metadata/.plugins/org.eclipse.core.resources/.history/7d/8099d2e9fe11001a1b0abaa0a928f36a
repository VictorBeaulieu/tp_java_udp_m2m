import java.util.ArrayList;
import java.util.List;

public class Message {
	private List<String> arrayKey = new ArrayList<String>();
	private List<String> arrayValue = new ArrayList<String>();
	
	public String serialize(List<String> arrayKey, List<String> arrayValue) {
		
		String tmp = new String("{\"");
		
		tmp += arrayKey.get(0) + "\":\"" +arrayValue.get(0);		
		for (int i= 1; i< arrayValue.size(); i++) 
		{ 
		    tmp += "\",\"" + arrayKey.get(i) + "\":\"" +arrayValue.get(i)  ;
		}
		tmp += "\"}";
		return tmp;	
	}
	public int deserialize(String message) {
		
		arrayKey.clear();
		arrayValue.clear();
		
		String[] listString;

		if(message.indexOf("{") != -1) {
			if(message.indexOf("}") != -1) {
				message = message.replace("{", "");
				message = message.replace("}", "");
				message = message.replace("\"", "");
				listString = message.split(",");				
				for(String str : listString)
				{
					if(str.indexOf(":") !=-1) {
						arrayKey.add(str.substring(0, str.indexOf(":")));
						arrayValue.add(str.substring(1+str.indexOf(":")));
					}
					else return -2;
				}	
			}
			else return -1;
		}
		else return -1;
		
		return 0;		
	}
	public List<String> getArrayKey() {
		return arrayKey;
	}
	public List<String> getArrayValue() {
		return arrayValue;
	}

}
