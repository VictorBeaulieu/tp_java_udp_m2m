import java.util.ArrayList;
import java.util.List;

public class Message {
	private List<String> arrayKey = new ArrayList<String>();
	private List<String> arrayValue = new ArrayList<String>();
	
	public String serialize(List<String> arrayKey, List<String> arrayValue) {
		
		String tmp = new String("{\"");
		
		tmp += arrayKey.get(0) + "\":\"" +arrayValue.get(0);		
		for (int i= 1; i< arrayValue.size(); i++) 
		{ 
		    tmp += "\",\"" + arrayKey.get(i) + "\":\"" +arrayValue.get(i)  ;
		}
		tmp += "\"}";
		return tmp;	
	}
	public String deserialize(String message) {
		
		arrayKey.clear();
		arrayValue.clear();
		
		String[] listString;

		if(message.indexOf("{") != -1) {
			if(message.indexOf("}") != -1) {
				message = message.replace("{", "");
				message = message.replace("}", "");
				message = message.replace("\"", "");
				listString = message.split(",");				
				for(String str : listString)
				{
					System.out.print(str.substring(0, str.indexOf(":")));
					System.out.print(str.substring(1+str.indexOf(":")));
					if(str.indexOf(":") !=-1) {
						System.out.print(str.substring(0, str.indexOf(":")));
						System.out.print(str.substring(1+str.indexOf(":")));
						
						/*
						if(str.substring(0, str.indexOf(":")) != "") arrayKey.add(str.substring(0, str.indexOf(":")));
						else return "missing key";
						
						if(str.substring(str.indexOf(":")) != "") arrayValue.add(str.substring(1+str.indexOf(":")));
						else return "missing value";*/
					}
					else return "missing ':'";
				}	
			}
			else return "missing '}'";
		}
		else return "missing '{'";
		
		return "ok";		
	}
	public List<String> getArrayKey() {
		return arrayKey;
	}
	public List<String> getArrayValue() {
		return arrayValue;
	}

}
